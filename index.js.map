{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/consts.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '49442933-c5db9ffac96cc4cef7ce5cd82';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport let dataTotalHits = 0;\n\nexport async function getImages(query, page_num, per_page) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page_num,\n        per_page: per_page,\n      },\n    });\n    dataTotalHits = response.data.totalHits;\n    return response.data.hits;\n  } catch (error) {\n    throw new Error(error.response ? error.response.status : error.message);\n  }\n}\n","export const refs = {\n  searchForm: document.querySelector('form'),\n  gallery: document.querySelector('.gallery'),\n  notFoundText: document.querySelector('.js-not-found-text'),\n  loader: document.querySelector('.loader'),\n  loadMoreBtn: document.querySelector('.load-more-btn'),\n};\n","import SimpleLightbox from 'simplelightbox';\nimport { getImages, dataTotalHits } from './pixabay-api';\nimport iziToast from 'izitoast';\nimport { refs } from './consts';\n\nconst lightbox = new SimpleLightbox('.gallery_link', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nexport async function fetchAndRenderImages(query, curPageNum, perPage) {\n  try {\n    setLoading(true); // Show loading indicator if needed\n    if (curPageNum === 1) {\n      hideLoadMoreButton();\n    }\n\n    const photos = await getImages(query, curPageNum, perPage);\n    console.log(photos);\n    if (!photos.length) {\n      iziToast.error({\n        title: 'Error',\n        message: `No results for query <span>${query}</span>`,\n        position: 'topRight',\n      });\n      return;\n    }\n\n    refs.gallery.insertAdjacentHTML('beforeend', createCardsMarkup(photos));\n    lightbox.refresh();\n    dataTotalHits > curPageNum * perPage\n      ? showLoadMoreButton()\n      : hideLoadMoreButton();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  } finally {\n    setLoading(false); // Hide loading indicator if needed\n  }\n}\n\nfunction setLoading(isLoading) {\n  if (isLoading) {\n    refs.loader.classList.add('active');\n  } else {\n    refs.loader.classList.remove('active');\n  }\n}\n\nfunction showLoadMoreButton() {\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction hideLoadMoreButton() {\n  refs.loadMoreBtn.classList.add('is-hidden');\n}\n\nfunction createCardsMarkup(photos) {\n  return photos\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery_item\">\n            <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                <img class=\"gallery_image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"info\">\n                <p>Likes <span>${likes}</span></p>\n                <p>Views <span>${views}</span></p>\n                <p>Comments <span>${comments}</span></p>\n                <p>Downloads <span>${downloads}</span></p>\n            </div>\n        </li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport { fetchAndRenderImages } from './js/render-functions';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from './js/consts';\n\nconst perPage = 15;\n\nconst state = {\n  curPageNum: 1,\n  savedQuery: '',\n};\n\nrefs.searchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const query = form.elements.query.value.trim();\n  if (query === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a query!',\n      position: 'topRight',\n    });\n\n    return;\n  }\n  state.savedQuery = query;\n  state.curPageNum = 1;\n  refs.gallery.innerHTML = '';\n\n  fetchAndRenderImages(state.savedQuery, state.curPageNum, perPage);\n});\n\nrefs.loadMoreBtn.addEventListener('click', function (event) {\n  state.curPageNum += 1;\n  fetchAndRenderImages(state.savedQuery, state.curPageNum, perPage);\n});\n"],"names":["API_KEY","BASE_URL","dataTotalHits","getImages","query","page_num","per_page","response","axios","error","refs","lightbox","SimpleLightbox","fetchAndRenderImages","curPageNum","perPage","setLoading","hideLoadMoreButton","photos","iziToast","createCardsMarkup","showLoadMoreButton","isLoading","webformatURL","largeImageURL","tags","likes","views","comments","downloads","state","event"],"mappings":"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"}