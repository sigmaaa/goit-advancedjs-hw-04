{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createCardsMarkup(photos) {\n  return photos\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery_item\">\n            <a class=\"gallery_link\" href=\"${largeImageURL}\">\n                <img class=\"gallery_image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            </a>\n            <div class=\"info\">\n                <p>Likes <span>${likes}</span></p>\n                <p>Views <span>${views}</span></p>\n                <p>Comments <span>${comments}</span></p>\n                <p>Downloads <span>${downloads}</span></p>\n            </div>\n        </li>`\n    )\n    .join('');\n}\n","export function getImages(query) {\n  const API_KEY = '49442933-c5db9ffac96cc4cef7ce5cd82';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const url = `${BASE_URL}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const options = {\n    method: 'GET',\n  };\n\n  return fetch(url, options).then(res => {\n    if (!res.ok) {\n      throw new Error(res.status);\n    }\n    return res.json();\n  });\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { createCardsMarkup } from './js/render-functions';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('form'),\n  gallery: document.querySelector('.gallery'),\n  notFoundText: document.querySelector('.js-not-found-text'),\n  loader: document.querySelector('.loader'),\n};\n\nimport { getImages } from './js/pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery_link', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nrefs.searchForm.addEventListener('submit', function (event) {\n  event.preventDefault();\n  const form = event.currentTarget;\n  const query = form.elements.query.value.trim();\n  if (query === '') {\n    iziToast.warning({\n      title: 'Caution',\n      message: 'Please enter a query!',\n      position: 'topRight',\n    });\n\n    return;\n  }\n  setLoading(true);\n  refs.gallery.innerHTML = '';\n\n  // Timeout to simulate loading\n  setTimeout(\n    () =>\n      getImages(query)\n        .then(photos => {\n          if (!photos.total) {\n            iziToast.error({\n              title: 'Error',\n              message: `No results for query <span>${query}</span>`,\n              position: 'topRight',\n            });\n            return;\n          }\n          refs.gallery.innerHTML = createCardsMarkup(photos.hits);\n          lightbox.refresh();\n        })\n        .catch(error => console.log(error))\n        .finally(() => setLoading(false)),\n    2000\n  );\n});\n\nfunction setLoading(isLoading) {\n  if (isLoading) {\n    refs.loader.classList.add('active');\n  } else {\n    refs.loader.classList.remove('active');\n  }\n}\n"],"names":["createCardsMarkup","photos","webformatURL","largeImageURL","tags","likes","views","comments","downloads","getImages","query","url","res","refs","lightbox","SimpleLightbox","event","iziToast","setLoading","error","isLoading"],"mappings":"6vBAAO,SAASA,EAAkBC,EAAQ,CACxC,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA,4CACoCL,CAAa;AAAA,kDACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,iCAG3CC,CAAK;AAAA,iCACLC,CAAK;AAAA,oCACFC,CAAQ;AAAA,qCACPC,CAAS;AAAA;AAAA,cAGzC,EACA,KAAK,EAAE,CACZ,CCzBO,SAASC,EAAUC,EAAO,CAI/B,MAAMC,EAAM,qEAAgCD,CAAK,2DAMjD,OAAO,MAAMC,EAJG,CACd,OAAQ,KACZ,CAE2B,EAAE,KAAKC,GAAO,CACrC,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE5B,OAAOA,EAAI,MACf,CAAG,CACH,CCTA,MAAMC,EAAO,CACX,WAAY,SAAS,cAAc,MAAM,EACzC,QAAS,SAAS,cAAc,UAAU,EAC1C,aAAc,SAAS,cAAc,oBAAoB,EACzD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAIMC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEDF,EAAK,WAAW,iBAAiB,SAAU,SAAUG,EAAO,CAC1DA,EAAM,eAAc,EAEpB,MAAMN,EADOM,EAAM,cACA,SAAS,MAAM,MAAM,OACxC,GAAIN,IAAU,GAAI,CAChBO,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,wBACT,SAAU,UAChB,CAAK,EAED,MACD,CACDC,EAAW,EAAI,EACfL,EAAK,QAAQ,UAAY,GAGzB,WACE,IACEJ,EAAUC,CAAK,EACZ,KAAKT,GAAU,CACd,GAAI,CAACA,EAAO,MAAO,CACjBgB,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8BAA8BP,CAAK,UAC5C,SAAU,UACxB,CAAa,EACD,MACD,CACDG,EAAK,QAAQ,UAAYb,EAAkBC,EAAO,IAAI,EACtDa,EAAS,QAAO,CAC1B,CAAS,EACA,MAAMK,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAMD,EAAW,EAAK,CAAC,EACpC,GACJ,CACA,CAAC,EAED,SAASA,EAAWE,EAAW,CACzBA,EACFP,EAAK,OAAO,UAAU,IAAI,QAAQ,EAElCA,EAAK,OAAO,UAAU,OAAO,QAAQ,CAEzC"}